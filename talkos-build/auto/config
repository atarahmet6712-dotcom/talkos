#!/bin/sh
# TalkOS Build Config - Optimized for Bookworm on Ubuntu runners
set -e

echo "[*] Running lb config..."

lb config noauto \
    --mode debian \
    --distribution bookworm \
    --architecture amd64 \
    --linux-flavours amd64 \
    --archive-areas "main contrib non-free non-free-firmware" \
    --parent-mirror-bootstrap "http://deb.debian.org/debian/" \
    --parent-mirror-chroot "http://deb.debian.org/debian/" \
    --parent-mirror-binary "http://deb.debian.org/debian/" \
    --mirror-bootstrap "http://deb.debian.org/debian/" \
    --mirror-binary "http://deb.debian.org/debian/" \
    --security false \
    --updates false \
    --backports false \
    --iso-application "TalkOS" \
    --iso-publisher "TalkOS Project" \
    --iso-volume "TalkOS-amd64" \
    --apt-recommends false \
    --debootstrap-options "--keyring=/usr/share/keyrings/debian-archive-keyring.gpg" \
    --bootappend-live "boot=live components locales=tr_TR.UTF-8 keyboard-layouts=tr keyboard-variants=, splash quiet ---" \
    --image-name "talkos" \
    "${@}"

echo "[*] lb config completed."